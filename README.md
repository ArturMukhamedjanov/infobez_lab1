# Работа 1: Разработка защищенного REST API с интеграцией в CI/CD

## Описание проекта и API

Проект предоставляет API для аутентификации пользователей и управления их данными. Реализована регистрация и авторизация с использованием JWT токенов, а также защищенные эндпоинты для работы с пользовательскими данными.

### Базовый URL
`localhost:24751`

### Аутентификация

#### Регистрация нового пользователя
- **Endpoint:** `POST /register`
- **Тип:** Public
- **Тело запроса:**
```json
{
    "email": "string",
    "password": "string"
}
```
- **Описание:** Создает нового пользователя в системе

#### Авторизация пользователя
- **Endpoint:** `POST /auth/login`
- **Тип:** Public
- **Тело запроса:**
```json
{
    "email": "string",
    "password": "string"
}
```
- **Ответ:**
```json
{
    "token": "string"
}
```
- **Описание:** Выполняет вход пользователя и возвращает JWT токен для доступа к защищенным эндпоинтам

### Работа с данными (требуют JWT токен)

#### Получение данных пользователей
- **Endpoint:** `GET /api/data`
- **Тип:** Secured (JWT)
- **Заголовки:** `Authorization: Bearer <token>`
- **Ответ:**
```json
[
  "data"
]
```
- **Описание:** Возвращает массив логинов зарегестрированных пользователей

#### Получение размера данных
- **Endpoint:** `GET /api/data`
- **Тип:** Secured (JWT)
- **Заголовки:** `Authorization: Bearer <token>`
- **Ответ:**
```
numer
```
- **Описание:** Возвращает кол-во пользователей зарегистрированных в системе


## Описание реализованных мер защиты

### Защита от SQLi

Для хранения данных пользователей используется ORM Hibernate.
Конкатенация строк для формирования SQL-запросов **не** используется.

### Защита от XSS

Все пользовательские данные, которые возвращаются в ответах API, возвращаются строго в формате JSON через DTO-объекты.
Библиотека Jackson обеспечивает экранирование данных, возвращаемых в JSON-строке.

### Защита от Broken Authentication

Защищенные эндпоинты требуют наличия JWT-токена в соответствующем заголовке запроса.
На уровне middleware токен парсится и валидируется, и только если он валиден, доступ к эндпоинту предоставляется.
email пользователя хранится в токене, и не может быть свободно изменен.
Пароли пользователей в БД хранятся в захэшированном с помощью bcrypt-алгоритма виде.

## Отчеты SAST/SCA

### Отчет SAST (Static Application Security Testing)

Статический анализ безопасности (SAST)
Инструмент: SpotBugs + FindSecBugs Plugin
Версия: 4.9.4.2
Методология: Анализ скомпилированного байткода Java
Покрытие уязвимостей:

SQL/NoSQL Injection

Cross-Site Scripting (XSS)

Path Traversal

Hardcoded Credentials

Cryptographic Weaknesses

Access Control Issues

Insecure Deserialization


![BugsReport](NoBugsReport.png)

### Отчет SCA (Software Composition Analysis)

Для тестируется используется OWASP Dependency-Check

![BugsFoundReport](FirstProblems.png)
![No_OWASP report](OWASPCheck.png)